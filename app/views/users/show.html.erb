
<div id="show-container" class="container">
  <% pic = ["https://source.unsplash.com/k4Akpt5-Sfk/1000x400", "https://source.unsplash.com/nCU4yq5xDEQ/1000x400", "https://source.unsplash.com/m3hn2Kn5Bns/1000x400","https://source.unsplash.com/Ei5d39YRrgY/1000x400","https://source.unsplash.com/3mWxKnqET3E/1000x400", "https://source.unsplash.com/9AmKnNZw3GA/1000x400", "https://source.unsplash.com/nmTm7knUnqs/1000x400"] %>


  <div class="profile-pic mx-auto", style="background-image: url(<%= pic.sample %>)" >
    <br>
  <%= cl_image_tag @user.photo.key, class: "avatar-xl mb-4 justify-content-center" %>
  <h3><%= @user.first_name.capitalize  %> <%= @user.last_name.capitalize  %></h3>
  <br>
  </div>
  <br>
  <h5 class="border-bottom border-secondary p-2 pr-1 pl-1"><%= @user.bio %> </h5>
  <br>

  <!-- Add friend button -->
  <div>
    <!-- see if there are friends -->
    <% friends = [] %>
    <% current_user.friends.each do |friend| %>
      <% friends << current_user_friend(friend, current_user)%>
    <% end %>
    <%=  %>

    <% if friends.include?(@user) %>

      <p class="text-success">Amis</p>

    <% else %>
    <!-- bug : ajax is not set perfectly here, todo : set user-id dynamiccaly -->
      <div id="user">

        <%= simple_form_for @friend, url: friends_path, method: :post, remote: true do |f| %>
        <%= f.input :user1_id, :as => :hidden, input_html: { value: current_user.id }  %>
        <%= f.input :user2_id, :as => :hidden, input_html: { value: @user.id }  %>
        <%= f.submit "Ajouter" %>
        <% end %>

      </div>

    <% end %>
  </div>

  <br>
  <h2 class="text-left">Jeux préférés</h2>
  <%= render 'shared/game_card', user_games: @user_games %>

  <h2> Comptes favoris </h2>
  <%= render 'shared/platform_card', user: @user %>

</div>


<% content_for :meta_title, "#{@user.first_name} is on #{DEFAULT_META["meta_product_name"]}" %>
<% content_for :meta_description, @user.bio %>
<% content_for :meta_image, cl_image_path(@user.photo) %>
